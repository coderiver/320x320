<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Template</title>
	<meta name="viewport" content="initial-scale=1">
	<link rel="stylesheet" media="all" href="css/screen.css">
	<script src="http://www.youtube.com/player_api"></script>
	<script src="js/jquery.js"></script>
	<script>

		// this function gets called when API is ready to use
		function onYouTubePlayerAPIReady() {
			var video = $('.video'),
					video_above = video.find('.video__above'),
					video_el = video.find('.video__above'),
					overlay = $('.overlay'),
					body = $('body'),
					players = {};
			// video
			video_above.on('click', function (event) {
				event.preventDefault();
				var video = $(this).parent(),
						video_link = $(this).attr('href'),
						video_id = $(this).data('id');
				if (!video.hasClass('is-loaded')) {
					video.addClass('is-loading');
					$(this).after('<iframe id="' + video_id + '" class="video__el" width="480" height="320" src="' + video_link + '?enablejsapi=1&html5=1&version=3" frameborder="0" allowfullscreen></iframe>');
					// create the global player from the specific iframe (video_id)
					players[video_id] = new YT.Player(video_id, {
						videoId: video_link,
					  events: {
					    'onReady': onPlayerReady
					  }
					});
					function onPlayerReady () {
						var player = players[video_id];
						player.playVideo();
						video.removeClass('is-loading');
						video.addClass('is-loaded');
					}
				}
				else {
					var player = players[video_id];
					// play
					player.playVideo();
				}
				video.addClass('is-play');
				overlay.show();
			});
			overlay.on('click', function() {
			  overlay.hide();
			  video.each(function () {
			  	if ($(this).hasClass('is-play')) {
			  		video.removeClass('is-play');
			  		var video_id = $(this).find('iframe').attr('id'),
			  				player = players[video_id];
			  		player.pauseVideo();
			  	};
			  });
			});
		}
	</script>
</head>
<body>
<!-- wrapper -->
<div class="wrapper">
	<!-- video -->
	<div class="video">
		<a class="video__above" href="http://www.youtube.com/embed/nDgamNLmZZE" data-id="video1"></a>
	</div>
	<!-- video -->
	<div class="video">
		<a class="video__above" href="http://www.youtube.com/embed/nDgamNLmZZE" data-id="video2"></a>
	</div>
</div>
<!-- overlay -->
<div class="overlay"></div>
</body>
</html>